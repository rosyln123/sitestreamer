<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zona Leste Roleplay - Dashboard</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "lucide-react": "https://esm.sh/lucide-react@0.292.0",
        "firebase/app": "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js",
        "firebase/auth": "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js",
        "firebase/firestore": "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"
      }
    }
    </script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body { margin: 0; background-color: #000; overflow-x: hidden; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.2); }
        model-viewer { width: 100%; height: 100%; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useRef, useEffect } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
            Twitch, Youtube, Upload, Users, Activity, CheckCircle, Gamepad2, Share2, 
            BarChart3, MonitorPlay, Send, Video, Lock, Search, Filter, FileVideo, 
            Image as ImageIcon, KeyRound, AlertCircle, FileText, X, Download, Printer, 
            ChevronLeft, Paperclip, Trash2, Book, Scale, ShieldAlert, Menu, Play, 
            ArrowRight, ArrowLeft, Box, Database, ExternalLink, Star, Home, Facebook, 
            Instagram, Twitter, ChevronDown, Eye, Link as LinkIcon 
        } from 'lucide-react';

        import { initializeApp } from 'firebase/app';
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from 'firebase/auth';
        import { getFirestore, collection, addDoc, onSnapshot, query, orderBy, updateDoc, deleteDoc, doc, serverTimestamp } from 'firebase/firestore';

        const ADMIN_PASSWORD = "zonazl"; 
        const DISCORD_LINK = "https://discord.gg/qYHkVrjG";
        const INSTAGRAM_LINK = "https://www.instagram.com/zonalesterp01/";
        const RULES_LINK = "https://lesteregras.netlify.app/";
        const DEV_ID = "1403850193111351306";
        const SERVER_NAME = "Zona Leste Roleplay";
        const MODEL_URL = "https://huggingface.co/efefqe/sitecertofotostramer/resolve/main/hitem3d.glb?download=true"; 
        const COLLECTION_NAME = 'zonaleste_inscricoes'; 

        const TikTokIcon = ({ size = 18, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="currentColor" className={className} xmlns="http://www.w3.org/2000/svg">
                <path d="M19.589 6.686a4.793 4.793 0 0 1-3.77-4.245V2h-3.445v13.672a2.896 2.896 0 0 1-5.201 1.743l-.002-.001.002.001a2.895 2.895 0 0 1 3.183-4.51v-3.5a6.329 6.329 0 0 0-5.394 10.692 6.33 6.33 0 0 0 10.857-4.424V8.687a8.182 8.182 0 0 0 4.773 1.526V6.79a4.831 4.831 0 0 1-1.003-.104z"/>
            </svg>
        );

        const convertToBase64 = (file) => {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
            });
        };

        const compressImage = (file) => {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = (event) => {
                const img = new Image();
                img.src = event.target.result;
                img.onload = () => {
                    const canvas = document.createElement('canvas');
                    const MAX_WIDTH = 600; 
                    const scaleSize = MAX_WIDTH / img.width;
                    
                    if (img.width > MAX_WIDTH) {
                        canvas.width = MAX_WIDTH;
                        canvas.height = img.height * scaleSize;
                    } else {
                        canvas.width = img.width;
                        canvas.height = img.height;
                    }

                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                    const dataUrl = canvas.toDataURL('image/jpeg', 0.6);
                    resolve(dataUrl);
                };
                img.onerror = (error) => reject(error);
                };
                reader.onerror = (error) => reject(error);
            });
        };

        const App = () => {
            const [db, setDb] = useState(null);
            const [auth, setAuth] = useState(null);
            const [user, setUser] = useState(null);
            
            useEffect(() => {
                const initFirebase = async () => {
                    try {
                        const firebaseConfig = {
                            apiKey: "AIzaSyAjiIPvTtg-V-seQ-EVmOAHhvqG9DQSgnc",
                            authDomain: "equipe-staff-entrevistador.firebaseapp.com",
                            projectId: "equipe-staff-entrevistador",
                            storageBucket: "equipe-staff-entrevistador.firebasestorage.app",
                            messagingSenderId: "52606063982",
                            appId: "1:52606063982:web:3bd9f6fdfd8875ab2c9d7f"
                        };

                        const app = initializeApp(firebaseConfig);
                        const authInstance = getAuth(app);
                        const dbInstance = getFirestore(app);
                        
                        setAuth(authInstance);
                        setDb(dbInstance);

                        await signInAnonymously(authInstance);

                        onAuthStateChanged(authInstance, (u) => {
                            setUser(u);
                        });
                    } catch (error) {
                        console.error("Firebase Init Error:", error);
                    }
                };
                initFirebase();
            }, []);

            const [activeTab, setActiveTab] = useState('INICIO'); 
            const [passwordInput, setPasswordInput] = useState('');
            const [loginError, setLoginError] = useState(false);
            const [isAuthenticated, setIsAuthenticated] = useState(false);
            
            const [previewFile, setPreviewFile] = useState(null);
            const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);
            const [deleteTargetId, setDeleteTargetId] = useState(null);
            const [showContractModal, setShowContractModal] = useState(false);
            const [selectedSubmission, setSelectedSubmission] = useState(null);
            const [showTermsModal, setShowTermsModal] = useState(false);
            const [showMenu, setShowMenu] = useState(false);

            const fileInputRef = useRef(null);
            const [uploadedFiles, setUploadedFiles] = useState([]);
            const [submissions, setSubmissions] = useState([]);
            const [formData, setFormData] = useState({
                nome: '', discord: '', plataforma: 'Twitch', linkCanal: '', mediaViewers: '', seguidores: '', clipLink: '' 
            });
            const [formSubmitted, setFormSubmitted] = useState(false);

            useEffect(() => {
                if (!db || !user) return;
                const q = collection(db, COLLECTION_NAME);
                const unsubscribe = onSnapshot(q, (snapshot) => {
                const data = snapshot.docs.map(doc => ({
                    id: doc.id,
                    ...doc.data()
                }));
                data.sort((a, b) => {
                    const dateA = a.createdAt?.seconds || 0;
                    const dateB = b.createdAt?.seconds || 0;
                    return dateB - dateA;
                });
                setSubmissions(data);
                });
                return () => unsubscribe();
            }, [db, user]);

            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setFormData(prev => ({ ...prev, [name]: value }));
            };

            const handleFileSelect = async (e) => {
                const files = Array.from(e.target.files);
                const newFiles = [];
                for (const file of files) {
                    if (file.type.startsWith('video')) {
                        alert(`O arquivo ${file.name} é um vídeo. Por favor, use o campo de "Link de Clip" para vídeos.`);
                        continue;
                    }
                    try {
                        const compressedBase64 = await compressImage(file);
                        if (compressedBase64.length > 500 * 1024) {
                            alert(`A imagem ${file.name} ainda é muito grande.`);
                            continue;
                        }
                        newFiles.push({
                            name: file.name, type: 'image', size: 'Otimizado', url: compressedBase64 
                        });
                    } catch (err) { console.error(err); }
                }
                setUploadedFiles(prev => [...prev, ...newFiles]);
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                if (!db || !user) return alert("Conectando ao banco de dados...");
                try {
                const uploadsToSave = uploadedFiles.map(f => ({ name: f.name, type: f.type, size: f.size, url: f.url }));
                const newSubmission = { ...formData, status: 'pending', data: new Date().toLocaleDateString('pt-BR'), createdAt: serverTimestamp(), contractSigned: false, contractFile: null, uploads: uploadsToSave };
                await addDoc(collection(db, COLLECTION_NAME), newSubmission);
                setFormSubmitted(true); setUploadedFiles([]);
                setFormData({ nome: '', discord: '', plataforma: 'Twitch', linkCanal: '', mediaViewers: '', seguidores: '', clipLink: '' });
                } catch (error) { alert("Erro ao enviar! Limite de tamanho excedido."); }
            };

            const handleLogin = (e) => {
                e.preventDefault();
                if (passwordInput === ADMIN_PASSWORD) { setIsAuthenticated(true); setLoginError(false); } else { setLoginError(true); }
            };

            const handleDelete = async () => {
                if (deleteTargetId && db) {
                    await deleteDoc(doc(db, COLLECTION_NAME, deleteTargetId));
                    if (selectedSubmission?.id === deleteTargetId) setSelectedSubmission(null);
                    setShowDeleteConfirm(false);
                }
            };

            const updateStatus = async (id, status) => {
                if (!db) return;
                await updateDoc(doc(db, COLLECTION_NAME, id), { status: status });
                if (selectedSubmission?.id === id) setSelectedSubmission(prev => ({ ...prev, status }));
            };

            const MobileMenuOverlay = () => {
                if (!showMenu) return null;
                return (
                <div className="fixed inset-0 z-[60] bg-black/95 backdrop-blur-xl flex flex-col items-center justify-center animate-in slide-in-from-right duration-300 text-white">
                    <button onClick={() => setShowMenu(false)} className="absolute top-8 right-8 text-white hover:text-cyan-400"><X size={32}/></button>
                    <div className="flex flex-col gap-8 text-center">
                    <button onClick={() => {setActiveTab('INICIO'); setShowMenu(false);}} className="text-3xl font-black hover:text-cyan-400 uppercase tracking-widest transition-transform hover:scale-110">Início</button>
                    <a href={DISCORD_LINK} target="_blank" rel="noopener noreferrer" className="text-3xl font-black hover:text-cyan-400 uppercase tracking-widest transition-transform hover:scale-110">Discord</a>
                    <a href={INSTAGRAM_LINK} target="_blank" rel="noopener noreferrer" className="text-3xl font-black hover:text-pink-500 uppercase tracking-widest transition-transform hover:scale-110">Instagram</a>
                    <a href={RULES_LINK} target="_blank" rel="noopener noreferrer" className="text-2xl font-black hover:text-cyan-400 uppercase tracking-widest transition-transform hover:scale-110">Regras</a>
                    <a href="https://zonaleste.centralcart.com.br/" target="_blank" rel="noopener noreferrer" className="text-2xl font-black hover:text-cyan-400 uppercase tracking-widest transition-transform hover:scale-110">Loja VIP</a>
                    <button onClick={() => {setActiveTab('ADMIN'); setShowMenu(false);}} className="text-3xl font-black hover:text-cyan-400 uppercase tracking-widest transition-transform hover:scale-110">Admin</button>
                    </div>
                </div>
                );
            };

            const Model3DViewer = () => {
                useEffect(() => {
                    if (!document.querySelector('script[src*="model-viewer"]')) {
                        const script = document.createElement('script');
                        script.type = 'module';
                        script.src = 'https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js';
                        document.head.appendChild(script);
                    }
                }, []);
                return (
                <model-viewer src={MODEL_URL} camera-controls disable-zoom autoplay shadow-intensity="1.5" camera-orbit="45deg 75deg 105%" field-of-view="25deg" style={{ width: '100%', height: '100%', mixBlendMode: 'normal' }} exposure="1.2" loading="eager"></model-viewer>
                );
            };

            const renderContent = () => {
                if (activeTab === 'INICIO') {
                    return (
                        <div className="relative w-full h-[100dvh] overflow-hidden bg-[#050505] flex items-center justify-center">
                        <div className="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-blue-900/10 via-[#050505] to-[#050505] pointer-events-none"></div>
                        <div className="absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-10 pointer-events-none"></div>

                        <div className="relative w-full h-full max-w-[1800px] flex flex-col justify-between p-6 md:p-12 z-10">
                            <header className="flex justify-between items-center z-50">
                                <div className="flex items-center gap-4">
                                    <button onClick={() => setShowMenu(true)} className="p-3 bg-white/5 border border-white/10 rounded-full hover:bg-white/10 text-white transition-all group"><Menu size={20} className="group-hover:scale-110 transition-transform"/></button>
                                    <span className="text-sm font-bold text-white tracking-[0.2em] uppercase hidden md:block">ZL ROLEPLAY</span>
                                </div>
                                <button onClick={() => setActiveTab('FORM')} className="hidden md:block px-8 py-3 bg-white text-black rounded-full text-xs font-black uppercase tracking-widest hover:bg-cyan-400 hover:scale-105 transition-all shadow-[0_0_20px_rgba(255,255,255,0.2)]">Join The City</button>
                            </header>

                            <div className="absolute inset-0 flex flex-col items-center justify-center pointer-events-none">
                                <div className="relative z-0 leading-none flex flex-col items-center justify-center select-none opacity-20 md:opacity-100"><h1 className="text-[18vw] font-black text-[#1a1a1a] uppercase tracking-tighter leading-[0.8] mix-blend-difference transform translate-y-[10%]">ZONA</h1></div>
                                <div className="absolute inset-0 z-10 pointer-events-auto flex items-center justify-center"><div className="w-full h-[50vh] md:h-[70vh] max-w-4xl transform scale-110 md:scale-125"><Model3DViewer /></div></div>
                                <div className="absolute inset-0 z-20 flex flex-col items-center justify-center pointer-events-none"><h1 className="text-[18vw] font-black text-transparent bg-clip-text bg-gradient-to-b from-white via-white/80 to-transparent uppercase tracking-tighter leading-[0.8] transform translate-y-[50%] mix-blend-overlay opacity-90 select-none">LESTE</h1></div>
                                <div className="absolute z-30 bottom-[15%] pointer-events-auto animate-bounce"><button onClick={() => setActiveTab('FORM')} className="flex items-center justify-center w-16 h-16 rounded-full border border-white/20 bg-black/50 backdrop-blur-md text-white hover:bg-cyan-500 hover:border-cyan-500 hover:text-black transition-all shadow-2xl"><ArrowRight size={24} /></button></div>
                            </div>

                            <div className="absolute left-8 bottom-1/2 transform translate-y-1/2 hidden lg:flex flex-col gap-8 z-30">
                                <a href={DISCORD_LINK} className="transform -rotate-90 text-gray-500 hover:text-white text-xs font-bold uppercase tracking-widest transition-colors origin-left w-4">Discord</a>
                                <a href={INSTAGRAM_LINK} className="transform -rotate-90 text-gray-500 hover:text-pink-500 text-xs font-bold uppercase tracking-widest transition-colors origin-left w-4">Insta</a>
                            </div>

                            <footer className="flex justify-between items-end relative z-30">
                                <div className="text-xs font-mono text-gray-600"><p>SERVER STATUS: <span className="text-emerald-500">ONLINE</span></p><p>PLAYERS: 128/128</p></div>
                                <button onClick={() => setShowTermsModal(true)} className="text-xs font-bold text-gray-500 hover:text-white uppercase tracking-widest">Termos e Condições</button>
                            </footer>
                        </div>
                        </div>
                    );
                }

                if (activeTab === 'FORM') {
                    return (
                        <div className="relative min-h-[100dvh] bg-[#050505] flex items-center justify-center p-4 lg:p-0">
                            <div className="absolute top-8 left-8 z-50"><button onClick={() => setActiveTab('INICIO')} className="flex items-center gap-3 text-white/40 hover:text-white uppercase text-[10px] font-bold tracking-[0.3em] transition-colors group"><div className="p-2 border border-white/10 rounded-full group-hover:bg-white group-hover:text-black transition-colors"><ArrowLeft size={14}/></div>VOLTAR AO MENU</button></div>
                            <div className="w-full max-w-5xl h-auto lg:h-[80vh] flex flex-col lg:flex-row bg-[#0a0a0a] border border-white/5 rounded-[2rem] overflow-hidden shadow-2xl relative animate-in zoom-in-95 duration-500">
                                <div className="hidden lg:flex w-1/3 bg-[#0f0f0f] relative flex-col justify-between p-10 border-r border-white/5">
                                    <div className="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1624138784181-dc7f5b759b2d?q=80&w=1000')] bg-cover bg-center opacity-20 grayscale mix-blend-overlay"></div>
                                    <div className="relative z-10"><h3 className="text-4xl font-black text-white uppercase leading-none tracking-tighter mb-4">Seja<br/><span className="text-cyan-500">Lenda</span></h3><p className="text-gray-500 text-xs leading-relaxed">A Zona Leste busca criadores de conteúdo comprometidos com a imersão e a qualidade.</p></div>
                                </div>
                                <div className="flex-1 p-8 lg:p-12 overflow-y-auto custom-scrollbar bg-[#050505]">
                                    {!formSubmitted ? (
                                        <div className="max-w-lg mx-auto">
                                            <div className="mb-8"><h2 className="text-2xl font-bold text-white uppercase tracking-wide mb-2">Aplicação</h2><div className="h-1 w-12 bg-cyan-500"></div></div>
                                            <form onSubmit={handleSubmit} className="space-y-6">
                                                <div className="grid grid-cols-2 gap-6">
                                                    <div className="space-y-2"><label className="text-[10px] font-bold text-gray-500 uppercase tracking-widest">Nome</label><input type="text" name="nome" value={formData.nome} onChange={handleInputChange} className="w-full bg-[#0a0a0a] border border-white/10 rounded-lg px-4 py-3 text-white text-sm focus:border-cyan-500 transition-colors" required /></div>
                                                    <div className="space-y-2"><label className="text-[10px] font-bold text-gray-500 uppercase tracking-widest">Discord</label><input type="text" name="discord" value={formData.discord} onChange={handleInputChange} className="w-full bg-[#0a0a0a] border border-white/10 rounded-lg px-4 py-3 text-white text-sm focus:border-cyan-500 transition-colors" required /></div>
                                                </div>
                                                <div className="space-y-2"><label className="text-[10px] font-bold text-gray-500 uppercase tracking-widest">Plataforma</label><div className="grid grid-cols-3 gap-3">{['Twitch', 'Youtube', 'TikTok'].map(plat => (<button type="button" key={plat} onClick={() => setFormData({...formData, plataforma: plat})} className={`py-3 rounded-lg text-[10px] font-bold uppercase tracking-wider border transition-all ${formData.plataforma === plat ? 'bg-cyan-500/10 border-cyan-500 text-cyan-400' : 'bg-[#0a0a0a] border-white/10 text-gray-500 hover:bg-white/5'}`}>{plat}</button>))}</div></div>
                                                <div className="space-y-2"><label className="text-[10px] font-bold text-gray-500 uppercase tracking-widest">Link do Canal</label><input type="url" name="linkCanal" value={formData.linkCanal} onChange={handleInputChange} className="w-full bg-[#0a0a0a] border border-white/10 rounded-lg px-4 py-3 text-white text-sm focus:border-cyan-500 transition-colors" required /></div>
                                                <div className="grid grid-cols-2 gap-6">
                                                    <div className="space-y-2"><label className="text-[10px] font-bold text-gray-500 uppercase tracking-widest">Média Viewers</label><input type="number" name="mediaViewers" value={formData.mediaViewers} onChange={handleInputChange} className="w-full bg-[#0a0a0a] border border-white/10 rounded-lg px-4 py-3 text-white text-sm focus:border-cyan-500 transition-colors" required /></div>
                                                    <div className="space-y-2"><label className="text-[10px] font-bold text-gray-500 uppercase tracking-widest">Seguidores</label><input type="number" name="seguidores" value={formData.seguidores} onChange={handleInputChange} className="w-full bg-[#0a0a0a] border border-white/10 rounded-lg px-4 py-3 text-white text-sm focus:border-cyan-500 transition-colors" required /></div>
                                                </div>
                                                <div className="space-y-2"><label className="text-[10px] font-bold text-gray-500 uppercase tracking-widest flex items-center gap-2"><LinkIcon size={12}/> Link de Clip / Vídeo</label><input type="url" name="clipLink" value={formData.clipLink} onChange={handleInputChange} placeholder="Ex: Medal, Twitch Clip, Youtube..." className="w-full bg-[#0a0a0a] border border-white/10 rounded-lg px-4 py-3 text-white text-sm focus:border-cyan-500 transition-colors" /></div>
                                                <div className="space-y-2"><label className="text-[10px] font-bold text-gray-500 uppercase tracking-widest">Anexos (Fotos - Max 600KB)</label><div onClick={() => fileInputRef.current.click()} className="border border-dashed border-white/10 bg-[#0a0a0a] rounded-xl p-6 cursor-pointer hover:border-cyan-500/50 transition-colors flex flex-col items-center gap-2 group"><input type="file" ref={fileInputRef} onChange={handleFileSelect} className="hidden" multiple accept="image/*" /><div className="p-3 bg-white/5 rounded-full group-hover:bg-cyan-500/10 transition-colors"><Upload size={20} className="text-gray-400 group-hover:text-cyan-400"/></div><span className="text-[10px] text-gray-500 uppercase tracking-widest">Carregar Prints</span></div>{uploadedFiles.length > 0 && <div className="flex flex-wrap gap-2 pt-2">{uploadedFiles.map((f, i) => (<span key={i} className="text-[10px] bg-white/5 px-2 py-1 rounded text-gray-400">{f.name}</span>))}</div>}</div>
                                                <button type="submit" className="w-full py-4 bg-white text-black font-bold uppercase tracking-widest text-xs rounded-lg hover:bg-cyan-400 hover:scale-[1.02] transition-all shadow-lg">Enviar Aplicação</button>
                                            </form>
                                        </div>
                                    ) : (
                                        <div className="h-full flex flex-col items-center justify-center text-center"><div className="w-20 h-20 bg-emerald-500/10 rounded-full flex items-center justify-center mb-6"><CheckCircle className="text-emerald-500" size={40} /></div><h3 className="text-2xl font-bold text-white mb-2">Recebido com Sucesso</h3><p className="text-gray-500 text-sm mb-8">Sua aplicação está em nossa base de dados.</p><button onClick={() => setFormSubmitted(false)} className="px-8 py-3 bg-white/5 text-white rounded-lg text-xs font-bold uppercase hover:bg-white/10 transition-all">Nova Aplicação</button></div>
                                    )}
                                </div>
                            </div>
                        </div>
                    );
                }

                if (activeTab === 'ADMIN') {
                    if (!isAuthenticated) {
                        return (
                            <div className="min-h-[100dvh] bg-[#050505] flex items-center justify-center p-4">
                                <button onClick={() => setActiveTab('INICIO')} className="absolute top-8 left-8 text-gray-500 hover:text-white uppercase text-xs font-bold tracking-widest"><ArrowLeft size={16} className="inline mr-2"/>Voltar</button>
                                <div className="w-full max-w-sm bg-[#0a0a0a] border border-white/10 p-10 text-center rounded-2xl relative shadow-2xl">
                                    <div className="w-12 h-12 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-6"><Lock size={20} className="text-white"/></div>
                                    <h2 className="text-xl font-bold text-white uppercase tracking-widest mb-8">Acesso Restrito</h2>
                                    <form onSubmit={handleLogin} className="space-y-4">
                                        <input type="password" value={passwordInput} onChange={(e) => setPasswordInput(e.target.value)} placeholder="SENHA" className="w-full bg-[#050505] border border-white/10 rounded-lg py-3 px-4 text-white text-center text-sm focus:border-cyan-500 focus:outline-none" autoFocus />
                                        {loginError && <div className="text-red-500 text-xs font-bold uppercase">Acesso Negado</div>}
                                        <button type="submit" className="w-full py-3 bg-white text-black font-bold uppercase tracking-widest text-xs rounded-lg hover:bg-cyan-400 transition-colors">Entrar</button>
                                    </form>
                                </div>
                            </div>
                        );
                    }

                    if (selectedSubmission) {
                        const sub = selectedSubmission;
                        return (
                            <div className="min-h-[100dvh] bg-[#050505] p-8 flex flex-col items-center">
                                <div className="w-full max-w-5xl">
                                    <div className="flex items-center gap-4 mb-8">
                                        <button onClick={() => setSelectedSubmission(null)} className="flex items-center gap-2 px-4 py-2 border border-white/10 rounded-lg text-gray-400 hover:text-white text-xs font-bold uppercase tracking-widest transition-colors"><ChevronLeft size={16}/> Voltar</button>
                                        <h2 className="text-xl font-bold text-white uppercase tracking-widest">Detalhes: <span className="text-cyan-500">{sub.nome}</span></h2>
                                    </div>
                                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                        <div className="bg-[#0a0a0a] border border-white/10 p-8 rounded-2xl space-y-6">
                                            <div className="flex justify-between items-center border-b border-white/5 pb-4">
                                                <div><div className="text-[10px] text-gray-500 uppercase tracking-widest">Status</div><div className={`text-lg font-bold uppercase ${sub.status === 'approved' ? 'text-cyan-500' : sub.status === 'rejected' ? 'text-red-500' : 'text-orange-500'}`}>{sub.status}</div></div>
                                                <div><div className="text-[10px] text-gray-500 uppercase tracking-widest text-right">Plataforma</div><div className="text-lg font-bold text-white text-right">{sub.plataforma}</div></div>
                                            </div>
                                            <div className="grid grid-cols-2 gap-4">
                                                <div className="bg-[#111] p-4 rounded-xl border border-white/5"><div className="text-xs text-gray-500 mb-1">Viewers</div><div className="text-xl font-bold text-white">{sub.mediaViewers}</div></div>
                                                <div className="bg-[#111] p-4 rounded-xl border border-white/5"><div className="text-xs text-gray-500 mb-1">Seguidores</div><div className="text-xl font-bold text-white">{sub.seguidores}</div></div>
                                            </div>
                                            <div className="bg-[#111] p-4 rounded-xl border border-white/5"><div className="text-xs text-gray-500 mb-1">Canal</div><a href={sub.linkCanal} target="_blank" rel="noreferrer" className="text-cyan-500 hover:underline truncate block">{sub.linkCanal}</a></div>
                                            {sub.clipLink && (<div className="bg-[#111] p-4 rounded-xl border border-white/5"><div className="text-xs text-gray-500 mb-1">Clip / Vídeo</div><a href={sub.clipLink} target="_blank" rel="noreferrer" className="text-cyan-500 hover:underline truncate block flex items-center gap-2"><ExternalLink size={14}/> {sub.clipLink}</a></div>)}
                                            <div className="pt-4 border-t border-white/5 flex flex-col gap-3">
                                                <h4 className="text-[10px] text-gray-500 uppercase tracking-widest font-bold">Ações Rápidas</h4>
                                                <div className="flex gap-2">
                                                    {sub.status === 'pending' && (<><button onClick={() => updateStatus(sub.id, 'approved')} className="flex-1 py-3 bg-emerald-500/10 text-emerald-500 border border-emerald-500/30 rounded-lg text-xs font-bold uppercase hover:bg-emerald-500/20 transition-all">Aprovar</button><button onClick={() => updateStatus(sub.id, 'rejected')} className="flex-1 py-3 bg-red-500/10 text-red-500 border border-red-500/30 rounded-lg text-xs font-bold uppercase hover:bg-red-500/20 transition-all">Reprovar</button></>)}
                                                    <button onClick={() => {setDeleteTargetId(sub.id); setShowDeleteConfirm(true);}} className="flex-1 py-3 bg-gray-800 text-gray-400 border border-white/10 rounded-lg text-xs font-bold uppercase hover:bg-gray-700 transition-all">Excluir</button>
                                                </div>
                                                {(sub.status === 'approved' || sub.status === 'active') && (<button onClick={() => setShowContractModal(true)} className="w-full py-3 bg-cyan-500/10 text-cyan-500 border border-cyan-500/30 rounded-lg text-xs font-bold uppercase hover:bg-cyan-500/20 flex items-center justify-center gap-2"><Printer size={14}/> Gerar Contrato</button>)}
                                            </div>
                                        </div>
                                        <div className="bg-[#0a0a0a] border border-white/10 p-8 rounded-2xl">
                                            <h4 className="text-sm font-bold text-white uppercase tracking-widest mb-6">Evidências Anexadas</h4>
                                            {sub.uploads && sub.uploads.length > 0 ? (
                                                <div className="grid grid-cols-2 gap-4">
                                                    {sub.uploads.map((file, i) => (
                                                        <div key={i} onClick={() => setPreviewFile(file)} className="aspect-video bg-black border border-white/10 rounded-lg overflow-hidden relative cursor-pointer group">
                                                            {file.type === 'image' ? <img src={file.url} className="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-opacity" alt="Evidence"/> : <div className="w-full h-full flex items-center justify-center text-gray-600"><FileVideo size={24}/></div>}
                                                            <div className="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/50"><Eye className="text-white"/></div>
                                                        </div>
                                                    ))}
                                                </div>
                                            ) : (<div className="text-center py-10 text-gray-600 text-xs font-mono">Nenhum arquivo anexado.</div>)}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        );
                    }

                    return (
                        <div className="min-h-[100dvh] bg-[#050505] p-8 overflow-y-auto">
                            <div className="max-w-7xl mx-auto">
                                <div className="flex justify-between items-center mb-8">
                                    <h2 className="text-2xl font-bold text-white uppercase tracking-widest">Dashboard</h2>
                                    <button onClick={() => setActiveTab('INICIO')} className="text-xs text-red-500 hover:text-white font-bold uppercase tracking-widest">Sair</button>
                                </div>
                                <div className="bg-[#0a0a0a] border border-white/10 rounded-2xl overflow-hidden">
                                    <table className="w-full text-left">
                                        <thead className="bg-white/5 text-[10px] text-gray-500 uppercase tracking-widest">
                                            <tr><th className="p-6">Candidato</th><th className="p-6">Plataforma</th><th className="p-6">Status</th><th className="p-6 text-right">Ação</th></tr>
                                        </thead>
                                        <tbody className="text-sm text-gray-300 divide-y divide-white/5">
                                            {submissions.map(sub => (
                                                <tr key={sub.id} onClick={() => setSelectedSubmission(sub)} className="hover:bg-white/5 transition-colors cursor-pointer group">
                                                    <td className="p-6 font-bold group-hover:text-white">{sub.nome}</td>
                                                    <td className="p-6 uppercase text-xs">{sub.plataforma}</td>
                                                    <td className="p-6"><span className={`text-[10px] font-bold uppercase px-3 py-1 rounded-full ${sub.status === 'approved' ? 'bg-cyan-500/20 text-cyan-400' : 'bg-white/10 text-gray-400'}`}>{sub.status}</span></td>
                                                    <td className="p-6 text-right">
                                                        <button onClick={(e) => { e.stopPropagation(); setDeleteTargetId(sub.id); setShowDeleteConfirm(true); }} className="text-gray-600 hover:text-red-500"><Trash2 size={16}/></button>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    );
                }

                return null;
            };

            const FilePreviewModal = () => {
                if (!previewFile) return null;
                return (
                    <div className="fixed inset-0 z-[80] bg-black/90 backdrop-blur-xl flex items-center justify-center p-4 animate-in fade-in">
                        <div className="relative w-full max-w-5xl h-[80vh] flex flex-col">
                            <div className="absolute top-0 right-0 -mt-12 flex gap-4">
                                {previewFile.url && <a href={previewFile.url} download={previewFile.name} className="text-white hover:text-cyan-400"><Download/></a>}
                                <button onClick={() => setPreviewFile(null)} className="text-white hover:text-red-400"><X/></button>
                            </div>
                            <div className="flex-1 bg-black border border-white/10 flex items-center justify-center overflow-hidden">
                                {previewFile.type === 'video' ? <video controls autoPlay className="max-w-full max-h-full"><source src={previewFile.url} type="video/mp4" /></video> : <img src={previewFile.url} className="max-w-full max-h-full object-contain" alt="Preview" />}
                            </div>
                        </div>
                    </div>
                );
            };

            const ContractModal = () => {
                if (!showContractModal || !selectedSubmission) return null;
                return (
                <div className="fixed inset-0 z-[70] bg-black/90 flex items-center justify-center p-4 text-black">
                    <div className="bg-white w-full max-w-3xl h-[85vh] flex flex-col p-8 overflow-hidden rounded-md">
                    <div className="flex justify-between items-center mb-8 border-b-2 border-black pb-4"><h2 className="text-2xl font-black uppercase">CONTRATO {SERVER_NAME}</h2><div className="flex gap-2 print:hidden"><button onClick={() => window.print()} className="p-2 border border-black hover:bg-black hover:text-white transition-colors"><Printer size={16}/></button><button onClick={() => setShowContractModal(false)} className="p-2 border border-black hover:bg-black hover:text-white transition-colors"><X size={16}/></button></div></div>
                    <div className="flex-1 overflow-y-auto font-serif space-y-6 text-sm">
                        <p><strong>CONTRATANTE:</strong> Administração {SERVER_NAME}</p><p><strong>CONTRATADO:</strong> {selectedSubmission.nome} (ID: {selectedSubmission.discord})</p><p className="mt-8">1. O presente contrato tem como objeto a parceria para criação de conteúdo.</p><div className="mt-16 flex justify-between pt-8 border-t border-gray-300"><div className="text-center w-1/3 border-t border-black pt-2 font-bold">Administração</div><div className="text-center w-1/3 border-t border-black pt-2 font-bold">{selectedSubmission.nome}</div></div>
                    </div></div></div>
                );
            };

            return (
                <>
                    {renderContent()}
                    <MobileMenuOverlay />
                    {previewFile && <FilePreviewModal />}
                    {showContractModal && selectedSubmission && <ContractModal />}
                    {showDeleteConfirm && <div className="fixed inset-0 z-[90] bg-black/80 flex items-center justify-center p-4"><div className="bg-[#0a0a0a] border border-red-500/30 p-8 rounded-xl max-w-sm w-full text-center"><h3 className="text-red-500 font-bold uppercase tracking-widest mb-4">Confirmar Exclusão</h3><div className="flex gap-4"><button onClick={() => setShowDeleteConfirm(false)} className="flex-1 py-3 border border-white/10 rounded-lg text-gray-400 text-xs font-bold uppercase">Cancelar</button><button onClick={handleDelete} className="flex-1 py-3 bg-red-500/10 text-red-500 border border-red-500/20 rounded-lg text-xs font-bold uppercase">Confirmar</button></div></div></div>}
                    {showTermsModal && <div className="fixed inset-0 z-[80] bg-black/90 backdrop-blur-md flex items-center justify-center p-4"><div className="bg-[#0a0a0a] border border-white/10 w-full max-w-2xl h-[70vh] flex flex-col rounded-2xl"><div className="p-6 border-b border-white/10 flex justify-between items-center"><h2 className="text-lg font-bold uppercase tracking-widest text-white">Termos de Uso</h2><button onClick={() => setShowTermsModal(false)}><X className="text-gray-500 hover:text-white"/></button></div><div className="flex-1 p-8 overflow-y-auto text-gray-400 text-sm space-y-4"><p>1. O acesso ao servidor é um privilégio.</p><p>2. Respeito acima de tudo.</p></div></div></div>}
                </>
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>